<!-- CONTENEDOR PRINCIPAL -->
<div class="min-h-[calc(100vh-64px)] flex flex-col items-center justify-center bg-gradient-to-br from-[#8b6b46] to-[#b8996c] p-6">

  <!-- üè∑Ô∏è T√çTULO GLOBAL -->
  <div class="text-center mb-8">
    <h1 class="text-4xl md:text-5xl font-extrabold text-[#322203] tracking-tight drop-shadow-sm">
      Crea tu cuenta
    </h1>
    <p class="text-gray-100/90 mt-1 text-base font-medium">
      √önete al sistema de gesti√≥n de estudiantes
    </p>
  </div>

  <!-- TARJETA PRINCIPAL -->
  <div class="w-full max-w-5xl bg-white rounded-3xl shadow-2xl border border-[#322203]/10 overflow-hidden">
    <div class="grid md:grid-cols-2">

      <!-- LADO IMAGEN -->
      <div class="hidden md:flex items-center justify-center bg-[#f6f2ec]">
        <img
          src="https://cdn-icons-png.flaticon.com/512/6521/6521996.png"
          alt="Registro de usuario"
          class="w-2/3 max-w-sm drop-shadow-lg transition-transform duration-500 hover:scale-105"
        />
      </div>

      <!-- LADO FORMULARIO -->
      <div class="p-8 md:p-10 bg-[#fbf9f5]">
        <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">

          <!-- Nombre -->
          <div>
            <label class="label">Nombre</label>
            <input type="text" formControlName="nombre" class="input" placeholder="Sebasti√°n"/>
          </div>

          <!-- Apellidos -->
          <div>
            <label class="label">Apellidos</label>
            <input type="text" formControlName="apellidos" class="input" placeholder="Romero"/>
          </div>

          <!-- Correo -->
          <div>
            <label class="label">Correo electr√≥nico</label>
            <input type="email" formControlName="correo" class="input" placeholder="correo@ejemplo.com"/>
          </div>

          <!-- Rol -->
          <div>
            <label class="label">Rol</label>
            <select formControlName="rol" class="input">
              <option *ngFor="let rol of roles()" [value]="rol">{{ rol }}</option>
            </select>
          </div>

          <!-- G√©nero + Fecha -->
          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="label">G√©nero</label>
              <select formControlName="genero" class="input">
                <option value="">Seleccionar</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
                <option value="Otro">Otro</option>
              </select>
            </div>

            <div>
              <label class="label">Fecha Nac.</label>
              <input type="date" formControlName="fecha_nacimiento" class="input"/>
            </div>
          </div>

          <!-- Celular -->
          <div>
            <label class="label">Celular</label>
            <input type="text" formControlName="celular" class="input" placeholder="70123456"/>
          </div>

          <!-- Bot√≥n -->
          <button type="submit" [disabled]="loading()" class="btn-primary w-full mt-4">
            <ng-container *ngIf="!loading(); else loadingTpl">Registrarme</ng-container>
          </button>

          <ng-template #loadingTpl>
            <span class="inline-flex items-center gap-2">
              <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" fill="currentColor"></path>
              </svg>
              Registrando‚Ä¶
            </span>
          </ng-template>

        </form>

        <p *ngIf="error()" class="text-sm text-red-600 text-center mt-4 font-medium">
          {{ error() }}
        </p>
      </div>
    </div>
  </div>
</div>

<!-- üåü MODAL -->
<div *ngIf="showModal()" class="fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-[9999]">
  <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm text-center animate-fadeIn">
    <h2 class="text-2xl font-bold text-[#322203] mb-2">üéâ Registro exitoso</h2>
    <p class="text-gray-600 mb-4">Usuario creado correctamente</p>

    <div *ngIf="nuevoUsuario() as user">
      <p class="text-lg font-semibold">Nombre: <span class="text-[#322203]">{{ user.nombre }}</span></p>
      <p class="text-lg font-semibold mt-2">Contrase√±a generada:</p>
      <div class="bg-gray-100 rounded-lg py-2 px-4 mt-1 font-mono text-[#1f1502] select-all">
        {{ user.contrasena }}
      </div>
      <button (click)="copiarContrasena()" class="btn-secondary mt-3 w-full">Copiar contrase√±a</button>
    </div>

    <button (click)="cerrarModal()" class="btn-primary mt-4 w-full">Ir al login</button>
  </div>
</div>
