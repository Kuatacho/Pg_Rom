<app-navbar></app-navbar>
<div class="min-h-[calc(100vh-64px)] flex items-center justify-center p-4 bg-gradient-to-br from-[#ebebeb] to-white">

  <div class="w-full max-w-5xl bg-white/90 backdrop-blur rounded-3xl shadow-2xl border border-[#322203]/10 overflow-hidden">
    <div class="grid md:grid-cols-2">

      <!-- LADO IMAGEN -->
      <div class="relative hidden md:block">
        <img
          src="https://cdn-icons-png.flaticon.com/512/6521/6521996.png"
          alt="Registro de usuario"
          class="h-full w-full object-cover"
        />
        <div class="absolute inset-0 bg-[#322203]/10 mix-blend-multiply pointer-events-none"></div>
      </div>

      <!-- LADO FORMULARIO -->
      <div class="p-6 sm:p-8 relative z-10">
        <div class="mb-6 text-center">
          <h1 class="text-3xl font-extrabold tracking-wide text-[#322203]">Crea tu cuenta</h1>
          <p class="text-sm text-gray-600 mt-1">Empieza tu viaje en lenguaje de se√±as</p>
        </div>

        <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-4">
          <div>
            <label class="block text-sm font-medium mb-1">Nombre</label>
            <input type="text" formControlName="nombre" class="input" placeholder="Sebasti√°n"/>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">Apellidos</label>
            <input type="text" formControlName="apellidos" class="input" placeholder="Romero"/>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">Correo</label>
            <input type="email" formControlName="correo" class="input" placeholder="correo@ejemplo.com"/>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div>
              <label class="block text-sm font-medium mb-1">G√©nero</label>
              <select formControlName="genero" class="input">
                <option value="">Seleccionar</option>
                <option value="Masculino">Masculino</option>
                <option value="Femenino">Femenino</option>
                <option value="Otro">Otro</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium mb-1">Fecha Nac.</label>
              <input type="date" formControlName="fecha_nacimiento" class="input"/>
            </div>
          </div>

          <div>
            <label class="block text-sm font-medium mb-1">Celular</label>
            <input type="text" formControlName="celular" class="input" placeholder="70123456"/>
          </div>

          <button type="submit" [disabled]="loading()" class="btn-primary w-full mt-3">
            <ng-container *ngIf="!loading(); else loadingTpl">Registrarme</ng-container>
          </button>
          <ng-template #loadingTpl>
            <span class="inline-flex items-center gap-2">
              <svg class="animate-spin h-5 w-5" viewBox="0 0 24 24" fill="none">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z" fill="currentColor"></path>
              </svg>
              Registrando‚Ä¶
            </span>
          </ng-template>
        </form>

        <p *ngIf="error()" class="text-sm text-red-600 text-center mt-4">{{ error() }}</p>
      </div>
    </div>
  </div>
</div>
<button (click)="showModal.set(true)">Test modal</button>
<!-- üåü MODAL -->
<div *ngIf="showModal()" class="fixed inset-0 flex items-center justify-center bg-black/50 backdrop-blur-sm z-[9999]">
  <div class="bg-white rounded-2xl shadow-2xl p-6 w-full max-w-sm text-center">
    <h2 class="text-2xl font-bold text-[#322203] mb-2">Registro exitoso!</h2>
    <p class="text-gray-600 mb-4">Usuario creado correctamente como <strong>Estudiante</strong></p>

    <div *ngIf="nuevoUsuario() as user">
      <p class="text-lg font-semibold">Nombre: <span class="text-[#322203]">{{ user.nombre }}</span></p>
      <p class="text-lg font-semibold mt-2">Contrase√±a generada:</p>
      <div class="bg-gray-100 rounded-lg py-2 px-4 mt-1 font-mono text-[#1f1502] select-all">
        {{ user.contrasena }}
      </div>
      <button (click)="copiarContrasena()" class="btn-secondary mt-3 w-full">Copiar contrase√±a</button>
    </div>

    <button (click)="cerrarModal()" class="btn-primary mt-4 w-full">Ir al login</button>
  </div>
</div>
